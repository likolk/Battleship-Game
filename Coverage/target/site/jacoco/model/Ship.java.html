<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Ship.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">project</a> &gt; <a href="index.source.html" class="el_package">model</a> &gt; <span class="el_source">Ship.java</span></div><h1>Ship.java</h1><pre class="source lang-java linenums">package model;


import java.security.SecureRandom;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Objects;


/**
 * The ship class is used to represent a ship in the Battleship game.
 * This ship class holds information of the ship's data.
 * Size is the number of squares the ship occupies.
 * @author kelvin.likollari@usi.ch
 */
public class Ship implements TypeOfShip {
<span class="pc" id="L18">    private int size = 5;</span>
    private static int positionX;
    private static int positionY;

<span class="fc" id="L22">    private static Ship[][] ships = new Ship[10][10];</span>

    // direction
    private static boolean direction;
    private List&lt;Coordinates&gt; coordinates;
    private boolean issunk;
<span class="pc" id="L28">    private boolean isshot = false;</span>
<span class="pc" id="L29">    private boolean isHit = false;</span>
    private boolean isHidden;
    private int shipIdentifier;
<span class="fc" id="L32">    static ArrayList&lt;Integer&gt; shipCoordinates = new ArrayList&lt;Integer&gt;();</span>


    /**
     * Constructor for the ship class.
     *
     * @param size      The size of the ship.
     *                  The size of the ship is the number of squares the ship occupies.
     * @param positionX The x position of the ship.
     *                  The x position of the ship is the x coordinate of the ship's first square.
     * @param positionY The y position of the ship.
     *                  The y position of the ship is the y coordinate of the ship's first square.
     * @param isshot    Whether the ship is shot or not.
     * @param issunk    Whether the ship is sunk or not.
     * @param isHidden  Whether the ship is hidden or not.
     * @param isHit     Whether the ship is hit or not.
     */
<span class="fc" id="L49">    public Ship(int size, int positionX, int positionY, boolean isshot, boolean issunk, boolean isHidden, boolean isHit) {</span>
<span class="fc" id="L50">        this.size = size;</span>
<span class="fc" id="L51">        this.positionX = positionX;</span>
<span class="fc" id="L52">        this.positionY = positionY;</span>
<span class="fc" id="L53">        this.isshot = isshot;</span>
<span class="fc" id="L54">        this.issunk = issunk;</span>
<span class="fc" id="L55">        this.isHit = false;</span>
<span class="fc" id="L56">        this.isHidden = true;</span>
<span class="fc" id="L57">    }</span>
    
    /**
     * Constructor of the Ship class.
     * 
     * @param positionX int that represents the position on the X axis.
     * @param positionY int that represents the position on the Y axis.
     * @param len int that represents the length of the ship.
     */
<span class="nc" id="L66">    public Ship(int positionX, int positionY,int len) {</span>
<span class="nc" id="L67">        this.positionX = positionX;</span>
<span class="nc" id="L68">        this.positionY = positionY;</span>
<span class="nc" id="L69">        this.size = len;</span>
<span class="nc" id="L70">    }</span>



    /**
     * Constructor for the ship class.
     * @param len The length of the ship.
     */
<span class="fc" id="L78">    public Ship(int len) {</span>
<span class="pc bpc" id="L79" title="1 of 4 branches missed.">        if (len &gt; 0 &amp;&amp; len &lt; 6) {</span>
<span class="fc" id="L80">            this.size = len;</span>
        } else {
<span class="fc" id="L82">            System.out.println(&quot;length must be an integer between 1 and 5&quot;);</span>
        }
<span class="fc" id="L84">    }</span>

    /**
     * Constructor for the ship class.
     * @param len The length of the ship.
     * @param siz  The ship's identifier.
     */
<span class="fc" id="L91">    public Ship(int len, int siz) {</span>
<span class="fc" id="L92">        size = len;</span>
<span class="fc" id="L93">        shipIdentifier = siz;</span>
<span class="fc" id="L94">    }</span>

    public static boolean getDirection() {
<span class="fc" id="L97">        return direction;</span>
    }


    /**
     * Returns the size of the ship.
     * @return The size of the ship.
     */
    public int getSize() {
<span class="fc" id="L106">        return size;</span>
    }

    /**
     * Returns the x position of the ship.
     *
     * @return The x position of the ship.
     */
    public int getPositionX() {
<span class="fc" id="L115">        return positionX;</span>
    }

    /**
     * Returns the y position of the ship.
     *
     * @return The y position of the ship.
     */
    public int getPositionY() {
<span class="fc" id="L124">        return positionY;</span>
    }

    /**
     * Returns the coordinates of the ship.
     *
     * @return The coordinates of the ship.
     */
    public List&lt;Coordinates&gt; getCoordinates() {
<span class="fc" id="L133">        return coordinates;</span>
    }

    /**
     * Sets the size of the ship.
     *
     * @param size The size of the ship.
     */
    public void setSize(int size) {
<span class="fc" id="L142">        this.size = size;</span>
<span class="fc" id="L143">    }</span>


    /**
     * Sets the x position of the ship.
     *
     * @param positionX The x position of the ship.
     */
    public static void setPositionX(int positionX) {
<span class="fc" id="L152">        Ship.positionX = positionX;</span>
<span class="fc" id="L153">    }</span>

    /**
     * Sets the y position of the ship.
     *
     * @param positionY The y position of the ship.
     */
    public static void setPositionY(int positionY) {
<span class="fc" id="L161">        Ship.positionY = positionY;</span>
<span class="fc" id="L162">    }</span>

    /**
     * Sets the position X and Y of the ship.
     * @param positionX The x position of the ship.
     * @param positionY The y position of the ship.
     */
    public void setPositionXAndY(int positionX, int positionY) {
<span class="fc" id="L170">        this.positionX = positionX;</span>
<span class="fc" id="L171">        this.positionY = positionY;</span>
<span class="fc" id="L172">    }</span>

    /**
     * Sets the coordinates of the ship.
     * @param coordinates The coordinates of the ship.
     */
    public void setCoordinates(List&lt;Coordinates&gt; coordinates) {
<span class="fc" id="L179">        this.coordinates = coordinates;</span>
<span class="fc" id="L180">    }</span>

    /**
     * Sets the coordinates of the ship.
     * @param x1 The x coordinate of the ship.
     * @param y1 The y coordinate of the ship.
     */
    public static void setCoordinatesOfEachShip(int x1, int y1) {
<span class="fc" id="L188">        shipCoordinates.add(x1);</span>
<span class="fc" id="L189">        shipCoordinates.add(y1);</span>
<span class="fc" id="L190">    }</span>

    /**
     * Gets the coordinates of the ship stored in the shipCoordinates arraylist.
     * @return The coordinates of the ship stored in the shipCoordinates arraylist.
     */
    public ArrayList&lt;Integer&gt; getEachShipCoordinates() {
<span class="fc" id="L197">        return shipCoordinates;</span>
    }

    /**
     * Sets ships at coordinates.
     * @param x1 The x coordinate of the ship.
     * @param y1 The y coordinate of the ship.
     * @param type The type of the ship.
     */
    public static void setShipsAtCoordinates(int x1, int y1, Ship type) {
<span class="pc bpc" id="L207" title="4 of 8 branches missed.">        if (x1 &gt;= 0 &amp;&amp; x1 &lt; 10 &amp;&amp; y1 &gt;= 0 &amp;&amp; y1 &lt; 10) {</span>
<span class="fc" id="L208">            ships[x1][y1] = type;</span>
        } else {
<span class="nc" id="L210">            System.out.println(&quot;x and y:&quot; + x1 + y1);</span>
<span class="nc" id="L211">            throw new IllegalArgumentException(&quot;x and y must be between 0 and 9&quot;);</span>
        }
<span class="fc" id="L213">    }</span>

    /**
     * Returns the ship's data as a string.
     * @return The ship's data as a string.
     */
    public String toString() {
        // print the data of the ship as a string
<span class="fc" id="L221">        return &quot;Ship: &quot; + size + &quot; &quot; + positionX + &quot; &quot; + positionY;</span>
    }

    /**
     * Checks if the ship is sunk.
     * @return True if the ship is sunk, false otherwise.
     */
    public boolean isSunk() {
<span class="fc" id="L229">        return false;</span>

    }

    /**
     * Checks if the ship is hit/shot.
     * @return True if the ship is hit/shot, false otherwise.
     */
    public boolean isShot() {
<span class="fc" id="L238">        return isSunk();</span>
    }

    /**
     * Sets the direction of the ship.
     * @param direction The direction of the ship.
     */
    public static void setDirection(boolean direction) {
<span class="fc" id="L246">        Ship.direction = direction;</span>
<span class="fc" id="L247">    }</span>



    /**
     * Gets the type of the ship.
     * @return The type of the ship.
     */
    @Override
    public String getTypeOfShip() {
<span class="fc" id="L257">        return null;</span>
    }

    /**
     * Checks whether we can place the ship at the given coordinates.
     * @param x1 The x coordinate of the ship.
     * @param y1 The y coordinate of the ship.
     * @param dir The direction of the ship.
     * @param field The field of the ship.
     * @return True if we can place the ship, false otherwise.
     */
    @Override
    public boolean canPlaceShipAt(int x1, int y1, boolean dir, Field field) {
<span class="fc" id="L270">        return false;</span>
    }

    /**
     * Checks whether we can place the ship at the given coordinates.
     * @param x1 The x coordinate of the ship.
     * @param y1 The y coordinate of the ship.
     * @param dir The direction of the ship.
     * @param ship The ship.
     * @return True if we can place the ship, false otherwise.
     */
    @Override
    public boolean canPlaceShipAt(int x1, int y1, boolean dir, Ship ship) {
<span class="nc" id="L283">        return false;</span>
    }

    /**
     * Placeship method used for the gui.
     * @param x2 The x coordinate of the ship.
     * @param y2 The y coordinate of the ship.
     * @param dir The direction of the ship.
     * @param field The field of the ship.
     */
    public void placeShipGUI(int x2, int y2, boolean dir, Ship field) { // 26.05.2022 : Mistake here
<span class="fc" id="L294">        Ship.setPositionX(x2);</span>
<span class="fc" id="L295">        Ship.setPositionY(y2);</span>
<span class="fc" id="L296">        Ship.setDirection(dir);</span>
<span class="pc bpc" id="L297" title="1 of 2 branches missed.">        if (dir) {</span>
<span class="fc bfc" id="L298" title="All 2 branches covered.">            for (int i = 0; i &lt; size; i++) {</span>
<span class="fc" id="L299">                field.setShipsAtCoordinates(x2, y2 - i, this);</span>
<span class="fc" id="L300">                setCoordinatesOfEachShip(x2, y2 - i);</span>
            }
        } else {
<span class="nc bnc" id="L303" title="All 2 branches missed.">            for (int i = 0; i &lt; size; i++) {</span>
<span class="nc" id="L304">                field.setShipsAtCoordinates(x2 - i, y2, this);</span>
<span class="nc" id="L305">                setCoordinatesOfEachShip(x2 - i, y2);</span>
            }
        }
<span class="fc" id="L308">    }</span>

    /**
     * Placeship randomly method used for the gui to place the ships randomly.
     */
    public static void placeShipsRandomly() {
<span class="nc" id="L314">        Battleship bs = new Battleship(1);</span>
        // check whether we are allowed to place the ships in the grid
<span class="nc" id="L316">        int[] shipCoordinates = checkWhetherShipCanBePlacedInGrid(bs,4);</span>
<span class="nc" id="L317">        System.out.println(&quot;The coordinates of the ship are: &quot; + Arrays.toString(shipCoordinates));</span>
<span class="nc" id="L318">        int xx = 0;</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">        if (Objects.isNull(shipCoordinates)) {</span>
<span class="nc" id="L320">            return;</span>
        }
<span class="nc bnc" id="L322" title="All 2 branches missed.">        if (shipCoordinates != null) {</span>
<span class="nc" id="L323">            xx = shipCoordinates[0];</span>
        }
<span class="nc" id="L325">        int yy = 0;</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">        if (shipCoordinates != null) {</span>
<span class="nc" id="L327">            yy = shipCoordinates[1];</span>
        }
<span class="nc" id="L329">        boolean dir = true;</span>
<span class="nc bnc" id="L330" title="All 2 branches missed.">        if (shipCoordinates != null) {</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">            if (shipCoordinates[2] == 0) {</span>
<span class="nc" id="L332">                dir = false;</span>
            } else {
<span class="nc" id="L334">                dir = true;</span>
            }
        }
<span class="nc" id="L337">        System.out.println(&quot;restarting game, with x: &quot;</span>
                + xx
                + &quot; and y: &quot;
                + yy + &quot; and dir: &quot;
                + dir);
<span class="nc" id="L342">        bs.placeShipGUI(xx, yy, dir, bs);</span>
<span class="nc" id="L343">        placeDestroyer();</span>
<span class="nc" id="L344">        placeSubmarine();</span>
<span class="nc" id="L345">        placeBattleship();</span>
<span class="nc" id="L346">        placeCarrier();</span>
<span class="nc" id="L347">        placeCruiser();</span>

<span class="nc" id="L349">    }</span>


    /**
     * Method that places the destroyer ship.
     */
    public static void placeDestroyer() {
<span class="nc bnc" id="L356" title="All 2 branches missed.">        for (int i = 0; i &lt; 2; i++) {</span>
<span class="nc" id="L357">            Destroyer destroyer = new Destroyer(i + 1);</span>
<span class="nc" id="L358">            int[] shipCoordinates = checkWhetherShipCanBePlacedInGrid(destroyer, 2);</span>
<span class="nc" id="L359">            int x1 = shipCoordinates[0];</span>
<span class="nc" id="L360">            int y1 = shipCoordinates[1];</span>
<span class="nc" id="L361">            boolean dir = true;</span>
<span class="nc bnc" id="L362" title="All 2 branches missed.">            if (shipCoordinates[2] == 0) {</span>
<span class="nc" id="L363">                dir = false;</span>
            } else {
<span class="nc" id="L365">                dir = true;</span>
            }
<span class="nc" id="L367">            destroyer.placeShipGUI(x1, y1, dir, destroyer);</span>
        }
<span class="nc" id="L369">    }</span>


    /**
     * Method that places the submarine ship.
     */
    public static void placeSubmarine() {
<span class="nc bnc" id="L376" title="All 2 branches missed.">        for (int i = 0; i &lt; 3; i++) {</span>
<span class="nc" id="L377">            Submarine submarine = new Submarine(i + 1);</span>
<span class="nc" id="L378">            int[] shipCoordinates = checkWhetherShipCanBePlacedInGrid(submarine, 3);</span>
<span class="nc" id="L379">            int x1 = shipCoordinates[0];</span>
<span class="nc" id="L380">            int y1 = shipCoordinates[1];</span>
<span class="nc" id="L381">            boolean dir = true;</span>
<span class="nc bnc" id="L382" title="All 2 branches missed.">            if (shipCoordinates[2] == 0) {</span>
<span class="nc" id="L383">                dir = false;</span>
            } else {
<span class="nc" id="L385">                dir = true;</span>
            }
<span class="nc" id="L387">            submarine.placeShipGUI(x1, y1, dir, submarine);</span>
        }
<span class="nc" id="L389">    }</span>

    /**
     * Method that places the battleship ship.
     */
    public static void placeBattleship() {
<span class="nc bnc" id="L395" title="All 2 branches missed.">        for (int i = 0; i &lt; 4; i++) {</span>
<span class="nc" id="L396">            Battleship battleship = new Battleship(i + 1);</span>
<span class="nc" id="L397">            int[] shipCoordinates = checkWhetherShipCanBePlacedInGrid(battleship, 4);</span>
<span class="nc" id="L398">            int x1 = shipCoordinates[0];</span>
<span class="nc" id="L399">            int y1 = shipCoordinates[1];</span>
<span class="nc" id="L400">            boolean dir = true;</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">            if (shipCoordinates[2] == 0) {</span>
<span class="nc" id="L402">                dir = false;</span>
            } else {
<span class="nc" id="L404">                dir = true;</span>
            }
<span class="nc" id="L406">            battleship.placeShipGUI(x1, y1, dir, battleship);</span>
        }
<span class="nc" id="L408">    }</span>

    /**
     * Method that places the carrier ship.
     */
    public static void placeCarrier() {
<span class="nc bnc" id="L414" title="All 2 branches missed.">        for (int i = 0; i &lt; 5; i++) {</span>
<span class="nc" id="L415">            Carrier carrier = new Carrier(i + 1);</span>
<span class="nc" id="L416">            int[] shipCoordinates = checkWhetherShipCanBePlacedInGrid(carrier, 5);</span>
<span class="nc" id="L417">            int x1 = shipCoordinates[0];</span>
<span class="nc" id="L418">            int y1 = shipCoordinates[1];</span>
<span class="nc" id="L419">            boolean dir = true;</span>
<span class="nc bnc" id="L420" title="All 2 branches missed.">            if (shipCoordinates[2] == 0) {</span>
<span class="nc" id="L421">                dir = false;</span>
            } else {
<span class="nc" id="L423">                dir = true;</span>
            }
<span class="nc" id="L425">            carrier.placeShipGUI(x1, y1, dir, carrier);</span>
        }
<span class="nc" id="L427">    }</span>

    /**
     * Method that places the cruiser ship.
     */
    public static void placeCruiser() {
<span class="nc bnc" id="L433" title="All 2 branches missed.">        for (int i = 0; i &lt; 3; i++) {</span>
<span class="nc" id="L434">            Cruiser cruiser = new Cruiser(i + 1);</span>
<span class="nc" id="L435">            int[] shipCoordinates = checkWhetherShipCanBePlacedInGrid(cruiser, 3);</span>
<span class="nc" id="L436">            int x1 = shipCoordinates[0];</span>
<span class="nc" id="L437">            int y1 = shipCoordinates[1];</span>
<span class="nc" id="L438">            boolean dir = true;</span>
<span class="nc bnc" id="L439" title="All 2 branches missed.">            if (shipCoordinates[2] == 0) {</span>
<span class="nc" id="L440">                dir = false;</span>
            } else {
<span class="nc" id="L442">                dir = true;</span>
            }
<span class="nc" id="L444">            cruiser.placeShipGUI(x1, y1, dir, cruiser);</span>
        }
<span class="nc" id="L446">    }</span>

    /**
     * Method that checks whether the ship can be placed in the grid.
     * @param ship The ship that is being placed.
     * @param len The length of the ship.
     * @return The coordinates of the ship.
     */
    public static int[] checkWhetherShipCanBePlacedInGrid(Ship ship, int len) {
<span class="nc" id="L455">        SecureRandom random = new SecureRandom();</span>
<span class="nc" id="L456">        int[] coordinates = new int[2];</span>
<span class="nc" id="L457">        int xrand = random.nextInt(10 - len + 1) + len - 1;</span>
<span class="nc" id="L458">        int yrand = random.nextInt(10 - len + 1) + len - 1;</span>
<span class="nc" id="L459">        System.out.println(&quot;1. x: &quot; + xrand + &quot; y: &quot; + yrand);</span>
        boolean dir;
<span class="nc bnc" id="L461" title="All 2 branches missed.">        if (random.nextInt(10) &gt; 4) { // if the number is greater than 4, then the ship is placed vertically</span>
<span class="nc" id="L462">            dir = true;</span>
        } else {
<span class="nc" id="L464">            dir = false;</span>
        }
<span class="nc" id="L466">        int dirr = 0;</span>
<span class="nc bnc" id="L467" title="All 2 branches missed.">        while (!ship.canPlaceShipAt(xrand, yrand, dir, ship)) {</span>
<span class="nc" id="L468">            xrand = random.nextInt(10 - len + 1) + len - 1;</span>
<span class="nc" id="L469">            yrand = random.nextInt(10 - len + 1) + len - 1;</span>
<span class="nc bnc" id="L470" title="All 2 branches missed.">            if (xrand + yrand + dirr % 2 == 0) {</span>
<span class="nc" id="L471">                dir = true;</span>
            } else {
<span class="nc" id="L473">                dir = false;</span>
            }
<span class="nc" id="L475">            System.out.println(&quot;2. x: &quot; + xrand + &quot; y: &quot; + yrand);</span>
<span class="nc" id="L476">            dirr++;</span>
<span class="nc bnc" id="L477" title="All 2 branches missed.">            if (dirr &gt; 100) {</span>
<span class="nc" id="L478">                System.out.println(&quot;Could not place ship&quot;);</span>
<span class="nc" id="L479">                return null;</span>
            }

        }
<span class="nc" id="L483">        int[] returnCoordinates = {xrand, yrand, 0};</span>
<span class="nc" id="L484">        System.out.println(&quot;3. x: &quot; + xrand + &quot; y: &quot; + yrand);</span>
<span class="nc bnc" id="L485" title="All 2 branches missed.">        if (dir) {</span>
<span class="nc" id="L486">            returnCoordinates[2] = 1;</span>
        }
<span class="nc" id="L488">        return returnCoordinates;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>