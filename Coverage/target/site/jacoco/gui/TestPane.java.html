<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TestPane.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">project</a> &gt; <a href="index.source.html" class="el_package">gui</a> &gt; <span class="el_source">TestPane.java</span></div><h1>TestPane.java</h1><pre class="source lang-java linenums">package gui;

import javax.swing.*;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestPane extends JPanel  {

    private List&lt;String&gt; menuItems;
    private String selectMenuItem;
    private String focusedItem;

    private MenuItemPainter painter;
    private Map&lt;String, Rectangle&gt; menuBounds;

<span class="nc" id="L37">    public TestPane() {</span>
<span class="nc" id="L38">        setBackground(Color.CYAN);</span>
<span class="nc" id="L39">        painter = new SimpleMenuItemPainter();</span>
<span class="nc" id="L40">        menuItems = new ArrayList&lt;&gt;(25);</span>
<span class="nc" id="L41">        menuItems.add(&quot;Start Game&quot;);</span>
<span class="nc" id="L42">        menuItems.add(&quot;Options&quot;);</span>
<span class="nc" id="L43">        menuItems.add(&quot;Exit&quot;);</span>
<span class="nc" id="L44">        selectMenuItem = menuItems.get(0);</span>

<span class="nc" id="L46">        MouseAdapter ma = new MouseAdapter() {</span>

            @Override
            public void mouseClicked(MouseEvent e) {
<span class="nc" id="L50">                String newItem = null;</span>
<span class="nc bnc" id="L51" title="All 2 branches missed.">                for (String text : menuItems) {</span>
<span class="nc" id="L52">                    Rectangle bounds = menuBounds.get(text);</span>
<span class="nc bnc" id="L53" title="All 2 branches missed.">                    if (bounds.contains(e.getPoint())) {</span>
<span class="nc" id="L54">                        newItem = text;</span>
<span class="nc" id="L55">                        break;</span>
                    }
<span class="nc" id="L57">                }</span>
<span class="nc bnc" id="L58" title="All 4 branches missed.">                if (newItem != null &amp;&amp; !newItem.equals(selectMenuItem)) {</span>
<span class="nc" id="L59">                    selectMenuItem = newItem;</span>
<span class="nc" id="L60">                    repaint();</span>
                }
<span class="nc" id="L62">            }</span>

            @Override
            public void mouseMoved(MouseEvent e) {
<span class="nc" id="L66">                focusedItem = null;</span>
<span class="nc bnc" id="L67" title="All 2 branches missed.">                for (String text : menuItems) {</span>
<span class="nc" id="L68">                    Rectangle bounds = menuBounds.get(text);</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">                    if (bounds.contains(e.getPoint())) {</span>
<span class="nc" id="L70">                        focusedItem = text;</span>
<span class="nc" id="L71">                        repaint();</span>
<span class="nc" id="L72">                        break;</span>
                    }
<span class="nc" id="L74">                }</span>
<span class="nc" id="L75">            }</span>

        };

<span class="nc" id="L79">        addMouseListener(ma);</span>
<span class="nc" id="L80">        addMouseMotionListener(ma);</span>

<span class="nc" id="L82">        InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);</span>
<span class="nc" id="L83">        ActionMap am = getActionMap();</span>

<span class="nc" id="L85">        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), &quot;arrowDown&quot;);</span>
<span class="nc" id="L86">        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), &quot;arrowUp&quot;);</span>

<span class="nc" id="L88">        am.put(&quot;arrowDown&quot;, new MenuAction(1));</span>
<span class="nc" id="L89">        am.put(&quot;arrowUp&quot;, new MenuAction(-1));</span>

<span class="nc" id="L91">    }</span>

    @Override
    public void invalidate() {
<span class="nc" id="L95">        menuBounds = null;</span>
<span class="nc" id="L96">        super.invalidate();</span>
<span class="nc" id="L97">    }</span>

    @Override
    public Dimension getPreferredSize() {
<span class="nc" id="L101">        return new Dimension(1920, 1080);</span>
    }

    @Override
    protected void paintComponent(Graphics g) {
<span class="nc" id="L106">        super.paintComponent(g);</span>
<span class="nc" id="L107">        Graphics2D g2d = (Graphics2D) g.create();</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">        if (menuBounds == null) {</span>
<span class="nc" id="L109">            menuBounds = new HashMap&lt;&gt;(menuItems.size());</span>
<span class="nc" id="L110">            int width = 0;</span>
<span class="nc" id="L111">            int height = 0;</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">            for (String text : menuItems) {</span>
<span class="nc" id="L113">                Dimension dim = painter.getPreferredSize(g2d, text);</span>
<span class="nc" id="L114">                width = Math.max(width, dim.width);</span>
<span class="nc" id="L115">                height = Math.max(height, dim.height);</span>
<span class="nc" id="L116">            }</span>

<span class="nc" id="L118">            int x = (getWidth() - (width + 10)) / 2;</span>

<span class="nc" id="L120">            int totalHeight = (height + 10) * menuItems.size();</span>
<span class="nc" id="L121">            totalHeight += 5 * (menuItems.size() - 1);</span>

<span class="nc" id="L123">            int y = (getHeight() - totalHeight) / 2;</span>

<span class="nc bnc" id="L125" title="All 2 branches missed.">            for (String text : menuItems) {</span>
<span class="nc" id="L126">                menuBounds.put(text, new Rectangle(x, y, width + 10, height + 10));</span>
<span class="nc" id="L127">                y += height + 10 + 5;</span>
<span class="nc" id="L128">            }</span>

        }
<span class="nc bnc" id="L131" title="All 2 branches missed.">        for (String text : menuItems) {</span>
<span class="nc" id="L132">            Rectangle bounds = menuBounds.get(text);</span>
<span class="nc" id="L133">            boolean isSelected = text.equals(selectMenuItem);</span>
<span class="nc" id="L134">            boolean isFocused = text.equals(focusedItem);</span>
<span class="nc" id="L135">            painter.paint(g2d, text, bounds, isSelected, isFocused);</span>
<span class="nc" id="L136">        }</span>
<span class="nc" id="L137">        g2d.dispose();</span>
<span class="nc" id="L138">    }</span>

    public class MenuAction extends AbstractAction {

        private final int delta;

<span class="nc" id="L144">        public MenuAction(int delta) {</span>
<span class="nc" id="L145">            this.delta = delta;</span>
<span class="nc" id="L146">        }</span>

        @Override
        public void actionPerformed(ActionEvent e) {
<span class="nc" id="L150">            int index = menuItems.indexOf(selectMenuItem);</span>
<span class="nc bnc" id="L151" title="All 2 branches missed.">            if (index &lt; 0) {</span>
<span class="nc" id="L152">                selectMenuItem = menuItems.get(0);</span>
            }
<span class="nc" id="L154">            index += delta;</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">            if (index &lt; 0) {</span>
<span class="nc" id="L156">                selectMenuItem = menuItems.get(menuItems.size() - 1);</span>
<span class="nc bnc" id="L157" title="All 2 branches missed.">            } else if (index &gt;= menuItems.size()) {</span>
<span class="nc" id="L158">                selectMenuItem = menuItems.get(0);</span>
            } else {
<span class="nc" id="L160">                selectMenuItem = menuItems.get(index);</span>
            }
<span class="nc" id="L162">            repaint();</span>
<span class="nc" id="L163">        }</span>

    }

}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>